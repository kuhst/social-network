(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[9],{431:function(e,t,n){"use strict";n.r(t);var s=n(45),c=n(60),a=n(1),o=n(13),r=n.n(o),l=n(439),i=n(436),u=n(28),d=n(331),j=n(432),b=n(434),v=n(430),f=n(413),h=n(0),O=function(e){var t=e.wsChannel,n=Object(a.useState)([]),o=Object(c.a)(n,2),r=o[0],d=o[1];return Object(a.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);d((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t))}))};return null===t||void 0===t||t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),Object(h.jsx)("div",{id:"scrollableDiv",style:{height:300,overflow:"auto",display:"flex",flexDirection:"column-reverse"},children:Object(h.jsx)(f.a,{dataLength:r.length,next:function(){},hasMore:!1,loader:Object(h.jsx)("h4",{children:"Loading..."}),scrollableTarget:"scrollableDiv",children:Object(h.jsx)(l.b,{itemLayout:"horizontal",dataSource:r,renderItem:function(e){return Object(h.jsx)(l.b.Item,{children:Object(h.jsx)(l.b.Item.Meta,{avatar:Object(h.jsx)(i.a,{src:e.photo}),title:Object(h.jsx)(u.b,{to:"/profile/"+e.userId,children:e.userName}),description:e.message})})}})})})},x=function(e){var t=e.wsChannel,n=Object(a.useState)(!1),s=Object(c.a)(n,2),o=s[0],r=s[1];return Object(a.useEffect)((function(){var e=function(){console.log("ready"),r(!0)};return null===t||void 0===t||t.addEventListener("open",e),function(){null===t||void 0===t||t.removeEventListener("open",e)}}),[t]),Object(h.jsx)("div",{children:Object(h.jsx)(d.d,{initialValues:{textMessage:""},onSubmit:function(e){null===t||void 0===t||t.send(e.textMessage)},children:Object(h.jsxs)(j.a,{children:[Object(h.jsx)(b.a,{name:"textMessage",type:"text"}),Object(h.jsx)(v.a,{loading:!1,disabled:!o,children:"Search"})]})})})};t.default=function(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){var e,t=function(){console.log("close"),n()},n=function(){var n,c;null===(n=e)||void 0===n||n.removeEventListener("close",t),null===(c=e)||void 0===c||c.close(),e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),console.log("create ws"),e.addEventListener("close",t),s(e)};return n(),function(){e.removeEventListener("close",t),e.close()}}),[]),Object(h.jsxs)("div",{className:r.a.block,children:[Object(h.jsx)(O,{wsChannel:n}),Object(h.jsx)(x,{wsChannel:n})]})}}}]);
//# sourceMappingURL=9.ae5d6ae6.chunk.js.map